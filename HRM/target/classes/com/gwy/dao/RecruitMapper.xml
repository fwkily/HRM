<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gwy.dao.RecruitMapper" >
    <insert id="addRecruit">
        INSERT INTO HRM_RECRUIT VALUES (RECRUIT_SEQ.nextval,#{recruitInformation.ri_id},#{resume.re_id},#{r_state})
    </insert>

    <select id="getRecruitByUserRe" resultType="com.gwy.model.Recruit">
        SELECT * FROM HRM_RECRUIT r,HRM_RESUME re,HRM_RECRUIT_INFORMATION ri
        WHERE r.RE_ID=re.RE_ID AND r.RI_ID=ri.RI_ID AND re.U_ID=#{0} AND ri.RI_ID=#{1}
    </select>
    <resultMap id="recruitMap" type="com.gwy.model.Recruit">
        <id property="r_id" column="R_ID"/>
        <result property="r_state" column="R_STATE"/>
    </resultMap>
    <resultMap id="recruitMap1" type="com.gwy.model.Recruit" extends="recruitMap">
        <association property="recruitInformation" resultMap="com.gwy.dao.Recruit_InformationMapper.recruit_InformationMap"/>
        <association property="resume" resultMap="com.gwy.dao.ResumeMapper.resumeMap1"/>
    </resultMap>
</mapper>
